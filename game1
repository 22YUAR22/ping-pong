from pygame import*
import sounddevice as sd
import scipy.io.wavfile as wav

fs = 44100
recording = None
is_recording = False
voice_file = 'voice_recording.waw'
minus_track = 'MinusDuHast.mp3'

init()
mixer.init()
mixer.music.set_volume(0.5)
window_size = 1200,600
window = display.set_mode(window_size)
clock = time.Clock()
font.init()
font_big = font.SysFont('Arial', 32)
btn_rect = Rect(425, 250, 350, 80)
rect_color = 'While'
btn_text = 'запис'

def start_voise_record():
    global recording
    recording = sd.rec(int(fs*5), samplerate=fs,channels=1,dtype='int16')

def stop_voise_recording():
    global recording
    sd.stop()
    if recording is not None:
        wav.write(voise_file, fs, recording)

def play_song_and_voise_together():
    mixer.music.load(minus_track)
    mixer_music.play()
    voise_sound = mixer.Sound(voice_file)
    voice_sound.play()

while True:
    for e in event.get:
        if e.type == QUIT:
            quit()
        if e.type == MOUSEBUTTONDOWN:
            if btn_rect.collidepoint(e.pos):
                if not is_recording:
                    rect_color = 'red'
                    btn_text = 'стоп та прослухати '
                    is_recording = True
                    mixer.music.load(mixer_track)
                    mixer_music.play()
                    start_voise_record()
                else:
                    


